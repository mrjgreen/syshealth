<?php
class CpuDataParserTest extends \PHPUnit_Framework_TestCase
{
    public function testItParsesOutput()
    {
$cpuInfo = <<<EOL
Linux 2.6.32-431.23.3.el6.x86_64 (n4wblade1) 	11/20/2014 	_x86_64_	(24 CPU)

03:03:27 PM  CPU    %usr   %nice    %sys %iowait    %irq   %soft  %steal  %guest   %idle
03:03:27 PM  all   22.52    0.00   10.37    3.19    0.00    0.82    0.00    0.00   63.10
03:03:27 PM    0   34.70    0.00   17.49   10.08    0.00    0.41    0.00    0.00   37.32
03:03:27 PM    1   31.84    0.00   13.54   10.19    0.00    0.43    0.00    0.00   44.00
03:03:27 PM    2   28.68    0.00   13.16    5.10    0.00    0.59    0.00    0.00   52.47
03:03:27 PM    3   29.42    0.00   12.12    3.88    0.00    0.61    0.00    0.00   53.98
03:03:27 PM    4   24.86    0.00   10.74    3.72    0.00    0.86    0.00    0.00   59.82
03:03:27 PM    5   27.56    0.00   10.14    3.08    0.00    1.41    0.00    0.00   57.80
03:03:27 PM    6   22.84    0.00    9.16    2.78    0.00    0.60    0.00    0.00   64.62
03:03:27 PM    7   26.12    0.00    9.25    1.91    0.00    1.11    0.00    0.00   61.61
03:03:27 PM    8   22.39    0.00    9.00    1.92    0.00    0.83    0.00    0.00   65.86
03:03:27 PM    9   24.25    0.00    8.23    1.61    0.00    0.97    0.00    0.00   64.94
03:03:27 PM   10   19.79    0.00    6.94    1.17    0.00    0.09    0.00    0.00   72.01
03:03:27 PM   11   22.05    0.00    6.81    1.23    0.00    0.17    0.00    0.00   69.74
03:03:27 PM   12   18.35    0.00    6.69    6.59    0.00    0.12    0.00    0.00   68.25
03:03:27 PM   13   23.82    0.00   11.92    6.36    0.00    0.24    0.00    0.00   57.65
03:03:27 PM   14   53.52    0.00    7.52    1.83    0.00    1.10    0.00    0.00   36.02
03:03:27 PM   15   23.71    0.00   12.04    2.59    0.00    0.63    0.00    0.00   61.02
03:03:27 PM   16   16.74    0.00   10.31    2.42    0.00    0.89    0.00    0.00   69.64
03:03:27 PM   17   16.74    0.00   10.78    2.01    0.00    1.02    0.00    0.00   69.44
03:03:27 PM   18   15.57    0.00    9.38    1.68    0.00    1.48    0.00    0.00   71.88
03:03:27 PM   19   13.69    0.00   11.75    1.45    0.01    1.40    0.00    0.00   71.70
03:03:27 PM   20   13.42    0.00   10.92    1.36    0.00    1.60    0.00    0.00   72.70
03:03:27 PM   21   13.66    0.00    9.08    1.36    0.01    1.55    0.00    0.00   74.35
03:03:27 PM   22    6.86    0.00   13.26    0.92    0.00    1.07    0.00    0.00   77.89
03:03:27 PM   23    9.15    0.00    8.59    1.15    0.00    0.55    0.00    0.00   80.55
EOL;

        $parser = new \Syshealth\System\DataParser\TableParser(2);

        $output = $parser->parse(trim($cpuInfo));

        $this->assertCount(25, $output);

    }
}